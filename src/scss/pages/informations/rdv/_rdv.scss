/*
 * @file Styles consolidés et complets pour le formulaire de RDV.
 */
@use "../../../abstracts" as *;

// --- Styles du conteneur principal ---
.rdv-form {
  max-width: $breakpoint-tablet;
  margin: $spacing-lg auto;
  padding: $spacing-lg;
  background-color: white;
  border-radius: 5px;
  border: $border-color;
}

.step-content {
  min-height: 300px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.controls {
  @include flex-between;
  margin-top: 2.5rem;
  padding-top: 1.5rem;
  border-top: $border-color;
}

// --- Boutons ---
.button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 24px;
  border-radius: 5px;
  font-weight: bold;
  cursor: pointer;
  text-transform: uppercase;
  font-size: 0.875rem;
  border: 1px solid transparent;
  &:disabled { opacity: 0.5; cursor: not-allowed; }
}

.button--primary {
  background-color: $primary-color;
  color: white;
  border-color: $primary-color;
  &:hover:not(:disabled) { background-color: darken($primary-color, 10%); }
}

.button--ghost {
  background-color: transparent;
  color: $secondary-color;
  border-color: $border-color;
  &:hover:not(:disabled) { background-color: $background-color; border-color: $secondary-color; }
}

// --- Feedback de soumission ---
.submission-feedback {
  padding: 1.5rem;
  border-radius: 5px;
  text-align: center;
  border: 1px solid;
  margin-top: $spacing-md;
  h3 { font-size: 1.5rem; margin-bottom: $spacing-sm; }
  p { margin-bottom: 1.5rem; }
}

.submission-feedback--success {
  background-color: lighten($primary-color, 40%);
  color: darken($primary-color, 15%);
  border-color: lighten($primary-color, 30%);
}

.submission-feedback--error {
  background-color: $color-error-light;
  color: $color-error-text;
  border-color: $color-error-border;
}

// --- Barre de progression ---
.progress {
  display: flex;
  padding-bottom: $spacing-md;
  margin-bottom: $spacing-lg;
  border-bottom: $border-color;
}

.progress__step {
  flex: 1;
  border: none;
  background: none;
  padding: $spacing-sm;
  font-family: inherit;
  text-align: center;
  position: relative;

  .progress__label { font-size: 0.875rem; text-transform: uppercase; font-family: $font-secondary; }
}
.progress__step--current {
  .progress__label { color: $primary-color; font-weight: bold; }
}
.progress__step--clickable {
  cursor: pointer;
  &:hover .progress__label { color: $primary-color; }
}
.progress__step--locked {
  opacity: .5;
  cursor: not-allowed;
}

// --- Champs de formulaire ---
.form-group { margin-bottom: $spacing-md; }
.form-label, .legend { font-family: $font-secondary; font-size: 0.75rem; text-transform: uppercase; opacity: 0.7; padding-bottom: 5px; font-weight: 600; }
.form-input, .textarea { width: 100%; padding: 12px; border: $border-color; border-radius: 5px; font-size: 1rem; &:focus { outline: none; border-color: $primary-color; } }
.textarea { min-height: 12.5rem; resize: vertical; }
.form__error { margin-top: $spacing-sm; color: $primary-color; font-size: 0.9rem; }
.textarea--error { border-color: $primary-color; }

// --- Cartes Radio ---
.radio-card-group { display: grid; gap: $spacing-md; @include responsive(tablet) { grid-template-columns: 1fr 1fr; } }
.radio-card {
  position: relative; padding: $spacing-md; border: 1px solid $border-color; border-radius: 5px; cursor: pointer;
  &__input { position: absolute; opacity: 0; }
  &__label { font-size: 1.125rem; }
  &:hover { border-color: lighten($primary-color, 20%); }
  &.radio-card--checked { border-color: $primary-color; background-color: lighten($primary-color, 45%); }
}

// --- Uploader ---
.dropzone { padding: $spacing-lg; border: 2px dashed $border-color; border-radius: 5px; background-color: $background-color; text-align: center; cursor: pointer; &:hover, &.dropzone--active { border-color: $primary-color; } }

// --- Récapitulatif & Édition en ligne ---
.rdv__errors { border: 1px solid $color-error-border; padding: $spacing-md; background: $color-error-light; border-radius: 5px; margin-bottom: $spacing-lg; }
.rdv__errors-title { font-weight: 600; margin: 0 0 $spacing-sm; color: $color-error-text; }
.rdv__errors-list { margin: 0; padding-left: $spacing-md; }
.errors__link { text-decoration: underline; color: $color-error-text; &:hover { color: darken($color-error-text, 10%); } }

.review__section { border: 1px solid $border-color; border-radius: 5px; margin-bottom: $spacing-md; background-color: white; &:focus { outline: none; border-color: $primary-color; } }
.review__header { display: flex; justify-content: space-between; align-items: center; padding: $spacing-md; }
.review__title { display: flex; align-items: center; gap: $spacing-sm; font-size: 1.125rem; font-weight: 600; }
.review__summary { padding: 0 $spacing-md $spacing-md; }
.review__editor { padding: $spacing-md; border-top: 1px solid $border-color; background-color: lighten($background-color, 2%); }
.review__editor-actions { display: flex; justify-content: flex-end; margin-top: $spacing-md; }

.badge {
  display: inline-flex; align-items: center; gap: .25rem;
  padding: .125rem .5rem; border-radius: 999px; font-size: .85rem; line-height: 1.2; font-weight: 600; text-transform: uppercase;
  &--complete { background-color: lighten($primary-color, 40%); color: darken($primary-color, 15%); }
  &--invalid { background-color: $color-error-light; color: $color-error-text; }
  &--modified { outline: 2px solid $color-warning; }
}

.edit-button { color: $primary-color; text-decoration: underline; background: none; border: none; cursor: pointer; font-size: 0.875rem; }

// --- Toasts ---
.toast { position: fixed; inset-inline-end: 1rem; inset-block-end: 1rem; display: grid; gap: .5rem; z-index: 9999; }
.toast__item { background: white; color: $darker-color; border: 1px solid $border-color; border-radius: .5rem; padding: .75rem 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; align-items: center; gap: $spacing-md; }
.toast__message { margin: 0; }
.toast__close { background: transparent; border: 0; color: $darker-color; opacity: 0.7; cursor: pointer; font-size: 1.2rem; &:hover { opacity: 1; } }

.badge{display:inline-flex;gap:.25rem;padding:.125rem .5rem;border-radius:999px;font-size:.85rem;line-height:1.2;}
.badge--complete{background:#e7f7ed;color:#1b7f3a;}
.badge--invalid{background:#ffe8e8;color:#b00020;}
.badge--modified{outline:2px solid #f2a900;}

.toast{position:fixed;inset-inline-end:1rem;inset-block-end:1rem;display:grid;gap:.5rem;z-index:9999;}
.toast__item{background:#fff;border:1px solid #e5e7eb;border-radius:.5rem;padding:.75rem 1rem;box-shadow:0 2px 4px rgba(0,0,0,.08);}
.toast__close{background:transparent;border:0;cursor:pointer;font-size:1.2rem;line-height:1;}